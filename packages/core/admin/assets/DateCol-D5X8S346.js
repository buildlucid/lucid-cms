import{t as m,i as s,a as n,d as f,I as T,b as _,y as b,f as P,M as E,h as W,af as B,T as o,al as F,r as J,w as V,P as q,k as G}from"./index-CQ3-BSEL.js";import{a as $,b as K,c as N}from"./Tr-Dh-rHsqH.js";import{B as M,z as O,D as Q}from"./Tooltip-C4WAYcWb.js";import{C as j}from"./Confirmation-BG2UDkdk.js";import{C as U}from"./ActionDropdown-DU8N8G-B.js";import{D as X}from"./DateText-zHyly9WS.js";var Y=m('<div class="w-full h-5 skeletone">'),H=m('<div class="w-full h-5 skeleton">'),Z=m("<tr class=bg-background-base>");const p=e=>(()=>{var l=Z();return s(l,n(f,{get when(){return e.isSelectable},get children(){return n($,{options:{width:65},get children(){return Y()}})}}),null),s(l,n(T,{get each(){return Array.from({length:e.columns})},children:(a,h)=>n($,{get options(){return{include:e.includes[h]}},get children(){return H()}})}),null),s(l,n($,{options:{noMinWidth:!0},get children(){return H()}}),null),l})();var ee=m('<div class="caption-bottom border-t-primary-base border-t-2 border-b border-b-border bg-input-base text-title py-2 text-sm">'),te=m('<div class="w-full overflow-x-auto scrollbar"><table class="w-full table h-auto border-collapse"><thead><tr class=h-10></tr></thead><tbody>');const me=e=>{let l;const[a,h]=_([]),[d,u]=_([]),v=t=>{a().filter(i=>i).length===1&&a()[t]||(h(i=>{const g=[...i];return g[t]=!g[t],g}),I(a()))},D=t=>{u(r=>{const i=[...r];return i[t]=!i[t],i})},x=()=>{const t=localStorage.getItem(`${e.key}-include`);return t?JSON.parse(t):e.head.map(()=>!0)},I=t=>{localStorage.setItem(`${e.key}-include`,JSON.stringify(t))},S=()=>{e.state.isLoading||(C()?u(t=>t.map(()=>!1)):u(t=>t.map(()=>!0)))},w=b(()=>{var t;return((t=e.options)==null?void 0:t.isSelectable)??!1}),C=b(()=>!d()||d().length===0?!1:d().every(t=>t)),L=b(()=>d().filter(t=>t).length),R=b(()=>e.head.map((t,r)=>({index:r,label:t.label,include:a()[r]})));return P(()=>{const t=()=>{l&&l.scrollWidth>l.clientWidth?l.setAttribute("data-overflowing","true"):l==null||l.setAttribute("data-overflowing","false")};t(),h(x());const r=[];for(let i=0;i<e.rows;i++)r.push(!1);return u(r),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[(()=>{var t=te(),r=t.firstChild,i=r.firstChild,g=i.firstChild,y=i.nextSibling,k=l;return typeof k=="function"?B(k,t):l=t,s(r,n(f,{get when(){return e==null?void 0:e.caption},get children(){var c=ee();return s(c,()=>e==null?void 0:e.caption),c}}),i),s(g,n(f,{get when(){return w()},get children(){return n(K,{type:"th",get value(){return C()},onChange:S,get theme(){return e.theme},get padding(){var c;return(c=e.options)==null?void 0:c.padding}})}}),null),s(g,n(T,{get each(){return e.head},children:(c,z)=>n(N,{get key(){return c().key},index:z,get label(){return c().label},get icon(){return c().icon},get searchParams(){return e.searchParams},get options(){var A;return{include:a()[z],sortable:c().sortable,padding:(A=e.options)==null?void 0:A.padding}},get theme(){return e.theme}})}),null),s(g,n(N,{classes:"text-right right-0",get theme(){return e.theme},get options(){var c;return{padding:(c=e.options)==null?void 0:c.padding}},get children(){return n(ie,{get columns(){return R()||[]},callbacks:{toggle:v}})}}),null),s(y,n(W,{get children(){return[n(E,{get when(){return e.state.isLoading},get children(){return n(T,{get each(){var c;return Array.from({length:((c=e.options)==null?void 0:c.totalLoadingRows)??10})},children:()=>n(p,{get columns(){return e.head.length},get isSelectable(){return w()},get includes(){return a()}})})}}),n(E,{get when(){return e.state.isSuccess},get children(){return e.children({include:a(),isSelectable:w(),selected:d(),setSelected:D})}})]}})),t})(),n(le,{selected:d,selectedCount:L,setSelected:u,get allowRestore(){var t;return((t=e.options)==null?void 0:t.allowRestore)??!1},get allowDelete(){var t;return((t=e.options)==null?void 0:t.allowDelete)??!1},get callbacks(){var t,r;return{delete:(t=e.callbacks)==null?void 0:t.deleteRows,restore:(r=e.callbacks)==null?void 0:r.restoreRows}},get copy(){return e.copy}})]};var ne=m('<div class="fixed bottom-4 md:bottom-6 left-[220px] right-0 flex justify-center items-center z-40 pointer-events-none px-4"><div class="pointer-events-auto bg-card-base p-2 border border-border rounded-md max-w-[400px] w-full justify-between flex items-center"><p class=text-sm><span class=font-bold></span> </p><div class="ml-2 flex gap-2">');const le=e=>{const[l,a]=_(!1),[h,d]=_(!1),[u,v]=_(!1),[D,x]=_(!1),I=b(()=>!(e.selectedCount()===0||!e.callbacks.delete&&!e.callbacks.restore)),S=b(()=>!(!e.allowDelete||!e.callbacks.delete)),w=b(()=>!(!e.allowRestore||!e.callbacks.restore)),C=()=>e.setSelected(t=>t.map(()=>!1)),L=async()=>{var t;if((t=e.callbacks)!=null&&t.delete){v(!0);try{await e.callbacks.delete(e.selected()),e.setSelected(r=>r.map(()=>!1)),a(!1)}finally{v(!1)}}},R=async()=>{var t;if((t=e.callbacks)!=null&&t.restore){x(!0);try{await e.callbacks.restore(e.selected()),e.setSelected(r=>r.map(()=>!1)),d(!1)}finally{x(!1)}}};return[n(f,{get when(){return I()},get children(){var t=ne(),r=t.firstChild,i=r.firstChild,g=i.firstChild;g.nextSibling;var y=i.nextSibling;return s(g,(()=>{var k=b(()=>e.selectedCount()>1);return()=>k()?`${e.selectedCount()} ${o()("items")}`:`1 ${o()("item")}`})()),s(i,()=>o()("selected"),null),s(y,n(M,{theme:"border-outline",size:"small",onClick:C,get children(){return o()("reset")}}),null),s(y,n(f,{get when(){return w()},get children(){return n(M,{theme:"primary",size:"small",onClick:()=>d(!0),get children(){return o()("restore")}})}}),null),s(y,n(f,{get when(){return S()},get children(){return n(M,{theme:"danger",size:"small",onClick:()=>a(!0),get children(){return o()("delete")}})}}),null),t}}),n(f,{get when(){return S()},get children(){return n(j,{get state(){return{open:l(),setOpen:a,isLoading:u(),isError:!1}},get copy(){var t,r;return{title:((t=e.copy)==null?void 0:t.deleteModalTitle)||o()("delete_items_modal_title"),description:((r=e.copy)==null?void 0:r.deleteModalDescription)||o()("delete_items_modal_description")}},callbacks:{onConfirm:L,onCancel:()=>{a(!1)}}})}}),n(f,{get when(){return w()},get children(){return n(j,{theme:"primary",get state(){return{open:h(),setOpen:d,isLoading:D(),isError:!1}},get copy(){var t,r;return{title:((t=e.copy)==null?void 0:t.restoreModalTitle)||o()("restore_items_modal_title"),description:((r=e.copy)==null?void 0:r.restoreModalDescription)||o()("restore_items_modal_description")}},callbacks:{onConfirm:R,onCancel:()=>{d(!1)}}})}})]};var re=m("<span class=sr-only>"),ae=m('<li class="mb-1.5 last-of-type:mb-0 text-body">');const ie=e=>n(O.Root,{get children(){return[n(O.Trigger,{class:"dropdown-trigger w-7 h-7 bg-background-base outline-none ring-0 focus:ring-1 focus:ring-primary-base rounded-md flex justify-center items-center hover:bg-background-hover",get children(){return[(()=>{var l=re();return s(l,()=>o()("toggle_col_visibility")),l})(),n(O.Icon,{get children(){return n(F,{class:"text-body",size:14})}})]}}),n(Q,{options:{as:"ul",rounded:!0,class:"w-[160px] z-50"},get children(){return n(J,{get each(){return e.columns},children:l=>(()=>{var a=ae();return s(a,n(U,{get value(){return l.include},onChange:()=>e.callbacks.toggle(l.index),get copy(){return{label:l.label}},noMargin:!0,theme:"full"})),a})()})}})]}});var se=m("<span>");const fe=e=>n($,{get options(){var l,a;return{include:(l=e==null?void 0:e.options)==null?void 0:l.include,padding:(a=e==null?void 0:e.options)==null?void 0:a.padding}},get children(){var l=se();return s(l,()=>e.text||"-"),V(()=>{var a,h,d,u;return q(l,G("text-sm",{"line-clamp-1":((a=e==null?void 0:e.options)==null?void 0:a.maxLines)===1,"line-clamp-2":((h=e==null?void 0:e.options)==null?void 0:h.maxLines)===2,"line-clamp-3":((d=e==null?void 0:e.options)==null?void 0:d.maxLines)===3,"line-clamp-4":((u=e==null?void 0:e.options)==null?void 0:u.maxLines)===4}))}),l}}),be=e=>n($,{get options(){var l,a;return{include:(l=e==null?void 0:e.options)==null?void 0:l.include,padding:(a=e==null?void 0:e.options)==null?void 0:a.padding}},get children(){return n(X,{get date(){return e.date}})}});export{be as D,fe as T,me as a};
