import{b as f,e as _,y as c,x as v,B as x,a as t,T as e,t as y,i as d,d as C,R as S,w as K,P as $,k as w,W as k}from"./index-CQ3-BSEL.js";import{S as D}from"./Standard-DQ0Jv3GR.js";import"./Tr-Dh-rHsqH.js";import"./MediaFolderCard-DV834B6M.js";import{I as L,B as b}from"./Tooltip-C4WAYcWb.js";import{I as p}from"./InfoRow-j4GZ1DzO.js";import{D as P}from"./ContentLocaleSelect-Cb-MBOKh.js";import{F as I}from"./Form-DkqXFt5b.js";import{g as R}from"./error-helpers-D9jUdhyT.js";import{c as E}from"./constants-34P7eZ5S.js";import"./ActionDropdown-DU8N8G-B.js";import"./ErrorMessage-BUQl5hDc.js";const F=s=>{const[o,a]=f(""),i=_.license.useUpdate({onSuccess:()=>{a("")}}),m=c(()=>v.get.hasPermission(["update_license"]).all),g=c(()=>s.licenseKey||""),h=c(()=>x.updateData({licenseKey:""},{licenseKey:o()})),n=c(()=>!h().changed&&o().length===0),r=c(()=>s.licenseKey.length===0);return t(I,{get state(){return{isLoading:i.action.isPending,errors:i.errors(),isDisabled:n()}},get content(){return{submit:e()("save")}},get permission(){return m()},onSubmit:()=>{i.action.mutate({licenseKey:o()||null})},get submitRow(){return t(b,{type:"button",theme:"danger-outline",size:"medium",onClick:()=>{a(""),i.action.mutate({licenseKey:null})},get permission(){return m()},get disabled(){return r()},get children(){return e()("clear")}})},get children(){return t(L,{id:"licenseKey",name:"licenseKey",type:"text",get value(){return o()},onChange:a,get copy(){return{label:e()("license"),placeholder:g()}},get errors(){return R("licenseKey",i.errors)},theme:"full",hideOptionalText:!0,noMargin:!0,get disabled(){return!r()}})}})};var z=y('<div class="flex items-center border-t border-border pt-4"><p class="text-sm text-error-base">'),B=y('<div class="flex flex-col gap-4"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span aria-hidden=true></span><p class=text-sm>');const M=()=>{const s=_.license.useGetStatus({queryParams:{}}),o=_.license.useVerify();return t(P,{get state(){return{isError:s.isError,isSuccess:s.isSuccess,isLoading:s.isFetching}},options:{padding:"24"},get children(){return t(p.Root,{get title(){return e()("manage_license")},get description(){return e()("manage_license_description")},get children(){return[t(p.Content,{get title(){return e()("purchase_license")},get description(){return e()("purchase_license_description")},get children(){return t(b,{type:"button",size:"medium",theme:"secondary",onClick:()=>{window.open(E.cmsMarketingPage,"_blank")},get children(){return e()("purchase_license_button")}})}}),t(p.Content,{get title(){return e()("update_license")},get description(){return e()("license_host_blurb")},get children(){return t(F,{get licenseKey(){var a,i;return((i=(a=s.data)==null?void 0:a.data)==null?void 0:i.key)||""}})}}),t(p.Content,{get title(){return e()("license_status")},get description(){return e()("license_status_description")},get children(){var a=B(),i=a.firstChild,m=i.firstChild,g=m.firstChild,h=g.nextSibling;return d(h,(()=>{var n=c(()=>{var r,l;return!!((l=(r=s.data)==null?void 0:r.data)!=null&&l.valid)});return()=>n()?e()("license_verified"):e()("license_unverified")})()),d(i,t(b,{type:"button",size:"medium",theme:"border-outline",onClick:()=>o.action.mutate({}),get loading(){return o.action.isPending},get children(){return e()("refresh_license_status")}}),null),d(a,t(C,{get when(){var n,r;return!((r=(n=s.data)==null?void 0:n.data)!=null&&r.valid)},get children(){var n=z(),r=n.firstChild;return d(n,t(S,{size:14,class:"text-error-base mr-2"}),r),d(r,()=>{var l,u;return((u=(l=s.data)==null?void 0:l.data)==null?void 0:u.errorMessage)||e()("license_invalid_message")}),n}}),null),K(()=>{var n,r,l,u;return $(g,w("inline-block w-3 h-3 rounded-full",{"bg-primary-base":(r=(n=s.data)==null?void 0:n.data)==null?void 0:r.valid,"bg-error-base":!((u=(l=s.data)==null?void 0:l.data)!=null&&u.valid)}))}),a}})]}})}})},Q=()=>t(k,{get slots(){return{header:t(D,{get copy(){return{title:e()("system_license_route_title"),description:e()("system_license_route_description")}}})}},get children(){return t(M,{})}});export{Q as default};
