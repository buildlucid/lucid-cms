import{b as l,e as d,a as r,T as s,d as h,A as w,u as _,f,M as u,g as b,t as o,s as v,i,h as E}from"./index-CQ3-BSEL.js";import{F as L}from"./Form-DkqXFt5b.js";import{I as c,E as x,n as y}from"./Tooltip-C4WAYcWb.js";import{g}from"./error-helpers-D9jUdhyT.js";import{L as F}from"./logo-icon-B4RyaE9T.js";import"./ErrorMessage-BUQl5hDc.js";const S=n=>{const[t,e]=l(""),[m,p]=l(""),a=d.auth.useLogin();return r(L,{get state(){return{isLoading:a.action.isPending,errors:a.errors()}},content:{submit:"Login"},options:{buttonFullWidth:!0},onSubmit:()=>{a.action.mutate({usernameOrEmail:t(),password:m()})},get children(){return[r(c,{id:"usernameOrEmail",name:"usernameOrEmail",type:"text",get value(){return t()},onChange:e,get copy(){return{label:s()("username_or_email")}},required:!0,autoFoucs:!0,autoComplete:"username",get errors(){return g("usernameOrEmail",a.errors)},theme:"full"}),r(c,{id:"password",name:"password",type:"password",get value(){return m()},onChange:p,get copy(){return{label:s()("password")}},required:!0,autoComplete:"current-password",get errors(){return g("password",a.errors)},theme:"full"}),r(h,{get when(){return n.showForgotPassword},get children(){return r(w,{class:"block text-sm mt-1 hover:text-primary-hover duration-200 transition-colors",type:"button",href:"/admin/forgot-password",get children(){return s()("forgot_password")}})}})]}})};var $=o('<img alt="Lucid CMS Logo"class="h-10 mx-auto mb-6">'),q=o('<h1 class="mb-1 text-center">'),O=o('<p class="text-center max-w-sm mx-auto">'),C=o("<div class=my-10>");const B=()=>{const n=_(),t=d.auth.useSetupRequired({queryParams:{}});return f(()=>{t.isSuccess&&t.data.data.setupRequired&&n("/admin/setup")}),r(E,{get children(){return[r(u,{get when(){return t.isLoading},get children(){return r(b,{})}}),r(u,{get when(){return t.isError},get children(){return r(x,{get content(){return{image:y,title:s()("error_title"),description:s()("error_message")}}})}}),r(u,{get when(){return t.isSuccess&&!t.data.data.setupRequired},get children(){return[(()=>{var e=$();return v(e,"src",F),e})(),(()=>{var e=q();return i(e,()=>s()("login_route_title")),e})(),(()=>{var e=O();return i(e,()=>s()("login_route_description")),e})(),(()=>{var e=C();return i(e,r(S,{showForgotPassword:!0})),e})()]}})]}})};export{B as default};
