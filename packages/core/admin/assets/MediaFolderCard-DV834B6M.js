var He=Object.defineProperty;var Re=(e,r,t)=>r in e?He(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var X=(e,r,t)=>Re(e,typeof r!="symbol"?r+"":r,t);import{a as E,M as We,t as N,i as T,a8 as je,w as ie,P as le,k as de,h as qe,a9 as Ne,T as A,aa as ce,ab as Te,ac as K,Z as ze,$ as Be,y as F,f as q,ad as O,ae as H,Q as ue,X as J,b as De,_ as Ve,x as B,B as ye,af as oe,d as Ce,j as Xe,u as Ge,ag as Ue,s as Ye}from"./index-CQ3-BSEL.js";import{M as Ze,A as Me}from"./Tr-Dh-rHsqH.js";import{C as Ee,A as Se}from"./ActionDropdown-DU8N8G-B.js";import"./Tooltip-C4WAYcWb.js";var Ke=N('<button type=button><span class="text-ellipsis overflow-hidden text-sm">');const Qe=e=>{const r=t=>{t.stopPropagation(),navigator.clipboard.writeText(e.value),Ne({title:A()("copy_to_clipboard_toast_title"),status:"success"})};return E(qe,{get children(){return E(We,{get when(){return e.type==="simple"},get children(){var t=Ke(),a=t.firstChild;return t.$$click=r,T(t,E(je,{class:"mr-2"}),a),T(a,()=>e.text),ie(()=>le(t,de("duration-200 cursor-copy transition-colors flex items-center max-w-full text-title fill-title whitespace-nowrap text-base hover:text-primary-hover hover:fill-primary-hover",e.class))),t}})}})};ce(["click"]);const[Je,R]=Te({selectedFolders:[],selectedMedia:[],reset(){R("selectedFolders",[]),R("selectedMedia",[])},addSelectedFolder(e){R("selectedFolders",K(r=>{r.push(e)}))},addSelectedMedia(e){R("selectedMedia",K(r=>{r.push(e)}))},removeSelectedFolder(e){R("selectedFolders",K(r=>{r.splice(r.indexOf(e),1)}))},removeSelectedMedia(e){R("selectedMedia",K(r=>{r.splice(r.indexOf(e),1)}))},resetSelectedFolders(){R("selectedFolders",[])},resetSelectedMedia(){R("selectedMedia",[])}}),V={get:Je};var ee=class{constructor(e){X(this,"x");X(this,"y");X(this,"width");X(this,"height");this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},Y=e=>{let r=new ee(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=et(r,t)),r},et=(e,r)=>{let t,a;if(r.startsWith("matrix3d(")){const s=r.slice(9,-1).split(/, /);t=+s[12],a=+s[13]}else if(r.startsWith("matrix(")){const s=r.slice(7,-1).split(/, /);t=+s[4],a=+s[5]}else t=0,a=0;return new ee({...e,x:e.x-t,y:e.y-a})},W=()=>({x:0,y:0}),ke=(e,r)=>e.x===r.x&&e.y===r.y,ae=(e,r)=>new ee({...e,x:e.x+r.x,y:e.y+r.y}),tt=(e,r)=>{const t=Math.max(e.top,r.top),a=Math.max(e.left,r.left),s=Math.min(e.right,r.right),l=Math.min(e.bottom,r.bottom),o=s-a,d=l-t;if(a<s&&t<l){const c=e.width*e.height,v=r.width*r.height,i=o*d;return i/(c+v-i)}return 0},ne=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,rt=(e,r,t)=>{const a=e.transformed,s={ratio:0,droppable:null};for(const l of r){const o=tt(a,l.layout);o>s.ratio?(s.ratio=o,s.droppable=l):o>0&&o===s.ratio&&l.id===t.activeDroppableId&&(s.droppable=l)}return s.droppable},_e=Be(),Wt=e=>{const r=ze({collisionDetector:rt},e),[t,a]=Te({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),s=(n,u,g)=>{n.substring(0,n.length-1),O(()=>t[n][u])&&a(n,u,"transformers",g.id,g)},l=(n,u,g)=>{n.substring(0,n.length-1),O(()=>t[n][u])&&O(()=>t[n][u].transformers[g])&&a(n,u,"transformers",g,void 0)},o=({id:n,node:u,layout:g,data:M})=>{const h=t.draggables[n],b={id:n,node:u,layout:g,data:M,_pendingCleanup:!1};let x;if(!h)Object.defineProperties(b,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return W();const I=Object.values(t.draggables[n].transformers);return I.sort(($,z)=>$.order-z.order),I.reduce(($,z)=>z.callback($),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>ae(t.draggables[n].layout,t.draggables[n].transform)}});else if(t.active.draggableId===n&&!t.active.overlay){const I={x:h.layout.x-g.x,y:h.layout.y-g.y},$="addDraggable-existing-offset",z=h.transformers[$],be=z?z.callback(I):I;x={id:$,order:100,callback:me=>({x:me.x+be.x,y:me.y+be.y})},re(()=>l("draggables",n,$))}H(()=>{a("draggables",n,b),x&&s("draggables",n,x)}),t.active.draggable&&_()},d=n=>{O(()=>t.draggables[n])&&(a("draggables",n,"_pendingCleanup",!0),queueMicrotask(()=>c(n)))},c=n=>{var u;if((u=t.draggables[n])!=null&&u._pendingCleanup){const g=t.active.draggableId===n;H(()=>{g&&a("active","draggableId",null),a("draggables",n,void 0)})}},v=({id:n,node:u,layout:g,data:M})=>{const h=t.droppables[n],b={id:n,node:u,layout:g,data:M,_pendingCleanup:!1};h||Object.defineProperties(b,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const x=Object.values(t.droppables[n].transformers);return x.sort((I,$)=>I.order-$.order),x.reduce((I,$)=>$.callback(I),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>ae(t.droppables[n].layout,t.droppables[n].transform)}}),a("droppables",n,b),t.active.draggable&&_()},i=n=>{O(()=>t.droppables[n])&&(a("droppables",n,"_pendingCleanup",!0),queueMicrotask(()=>f(n)))},f=n=>{var u;if((u=t.droppables[n])!=null&&u._pendingCleanup){const g=t.active.droppableId===n;H(()=>{g&&a("active","droppableId",null),a("droppables",n,void 0)})}},m=({id:n,activators:u})=>{a("sensors",n,{id:n,activators:u,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[n].coordinates.current.x-t.sensors[n].coordinates.origin.x,y:t.sensors[n].coordinates.current.y-t.sensors[n].coordinates.origin.y}}}})},y=n=>{if(!O(()=>t.sensors[n]))return;const u=t.active.sensorId===n;H(()=>{u&&a("active","sensorId",null),a("sensors",n,void 0)})},p=({node:n,layout:u})=>{const g=t.active.overlay,M={node:n,layout:u};g||Object.defineProperties(M,{id:{enumerable:!0,configurable:!0,get:()=>{var h;return(h=t.active.draggable)==null?void 0:h.id}},data:{enumerable:!0,configurable:!0,get:()=>{var h;return(h=t.active.draggable)==null?void 0:h.data}},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([h])=>h!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const h=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return h.sort((b,x)=>b.order-x.order),h.reduce((b,x)=>x.callback(b),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?ae(t.active.overlay.layout,t.active.overlay.transform):new ee({x:0,y:0,width:0,height:0})}}),a("active","overlay",M)},D=()=>a("active","overlay",null),C=(n,u)=>{H(()=>{a("sensors",n,"coordinates",{origin:{...u},current:{...u}}),a("active","sensorId",n)})},S=n=>{const u=t.active.sensorId;u&&a("sensors",u,"coordinates","current",{...n})},L=()=>a("active","sensorId",null),k=(n,u)=>{const g={};for(const h of Object.values(t.sensors))if(h)for(const[b,x]of Object.entries(h.activators))g[b]??(g[b]=[]),g[b].push({sensor:h,activator:x});const M={};for(const h in g){let b=h;u&&(b=`on${h}`),M[b]=x=>{for(const{activator:I}of g[h]){if(t.active.sensor)break;I(x,n)}}}return M},_=()=>{let n=!1;const u=Object.values(t.draggables),g=Object.values(t.droppables),M=t.active.overlay;return H(()=>{const h=new WeakMap;for(const b of u)if(b){const x=b.layout;h.has(b.node)||h.set(b.node,Y(b.node));const I=h.get(b.node);ne(x,I)||(a("draggables",b.id,"layout",I),n=!0)}for(const b of g)if(b){const x=b.layout;h.has(b.node)||h.set(b.node,Y(b.node));const I=h.get(b.node);ne(x,I)||(a("droppables",b.id,"layout",I),n=!0)}if(M){const b=M.layout,x=Y(M.node);ne(b,x)||(a("active","overlay","layout",x),n=!0)}}),n},w=()=>{const n=t.active.overlay??t.active.draggable;if(n){const u=r.collisionDetector(n,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),g=u?u.id:null;t.active.droppableId!==g&&a("active","droppableId",g)}},j=n=>{const u={id:"sensorMove",order:0,callback:g=>t.active.sensor?{x:g.x+t.active.sensor.coordinates.delta.x,y:g.y+t.active.sensor.coordinates.delta.y}:g};_(),H(()=>{a("active","draggableId",n),s("draggables",n,u)}),w()},Z=()=>{const n=O(()=>t.active.draggableId);H(()=>{n!==null&&l("draggables",n,"sensorMove"),a("active",["draggableId","droppableId"],null)}),_()},fe=n=>{q(()=>{const u=t.active.draggable;u&&O(()=>n({draggable:u}))})},te=n=>{q(()=>{const u=t.active.draggable;if(u){const g=O(()=>t.active.overlay);Object.values(g?g.transform:u.transform),O(()=>n({draggable:u,overlay:g}))}})},he=n=>{q(()=>{const u=t.active.draggable,g=t.active.droppable;u&&O(()=>n({draggable:u,droppable:g,overlay:t.active.overlay}))})},re=n=>{q(({previousDraggable:u,previousDroppable:g,previousOverlay:M})=>{const h=t.active.draggable,b=h?t.active.droppable:null,x=h?t.active.overlay:null;return!h&&u&&O(()=>n({draggable:u,droppable:g,overlay:M})),{previousDraggable:h,previousDroppable:b,previousOverlay:x}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};te(()=>w()),r.onDragStart&&fe(r.onDragStart),r.onDragMove&&te(r.onDragMove),r.onDragOver&&he(r.onDragOver),r.onDragEnd&&re(r.onDragEnd);const Fe=[t,{addTransformer:s,removeTransformer:l,addDraggable:o,removeDraggable:d,addDroppable:v,removeDroppable:i,addSensor:m,removeSensor:y,setOverlay:p,clearOverlay:D,recomputeLayouts:_,detectCollisions:w,draggableActivators:k,sensorStart:C,sensorMove:S,sensorEnd:L,dragStart:j,dragEnd:Z,onDragStart:fe,onDragMove:te,onDragOver:he,onDragEnd:re}];return E(_e.Provider,{value:Fe,get children(){return r.children}})},ge=()=>Ve(_e)||null,at=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:a,sensorStart:s,sensorMove:l,sensorEnd:o,dragStart:d,dragEnd:c}]=ge(),v=250,i=10;ue(()=>{t({id:e,activators:{pointerdown:D}})}),J(()=>{a(e)});const f=()=>r.active.sensorId===e,m={x:0,y:0};let y=null,p=null;const D=(w,j)=>{w.button===0&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",k),p=j,m.x=w.clientX,m.y=w.clientY,y=window.setTimeout(S,v))},C=()=>{y&&(clearTimeout(y),y=null),document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",k),document.removeEventListener("selectionchange",_)},S=()=>{r.active.sensor?f()||C():(s(e,m),d(p),_(),document.addEventListener("selectionchange",_))},L=w=>{const j={x:w.clientX,y:w.clientY};if(!r.active.sensor){const Z={x:j.x-m.x,y:j.y-m.y};Math.sqrt(Z.x**2+Z.y**2)>i&&S()}f()&&(w.preventDefault(),l(j))},k=w=>{C(),f()&&(w.preventDefault(),c(),o())},_=()=>{var w;(w=window.getSelection())==null||w.removeAllRanges()}},jt=e=>(at(),F(()=>e.children)),Oe=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),$e=(e,r={})=>{const[t,{addDraggable:a,removeDraggable:s,draggableActivators:l}]=ge(),[o,d]=De(null);ue(()=>{const f=o();f&&a({id:e,node:f,layout:Y(f),data:r})}),J(()=>s(e));const c=()=>t.active.draggableId===e,v=()=>{var f;return((f=t.draggables[e])==null?void 0:f.transform)||W()};return Object.defineProperties((f,m)=>{const y=m?m():{};q(()=>{const p=o(),D=l(e);if(p)for(const C in D)p.addEventListener(C,D[C]);J(()=>{if(p)for(const C in D)p.removeEventListener(C,D[C])})}),d(f),y.skipTransform||q(()=>{const p=v();if(ke(p,W()))f.style.removeProperty("transform");else{const D=Oe(v());f.style.setProperty("transform",D.transform??null)}})},{ref:{enumerable:!0,value:d},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>l(e,!0)},transform:{enumerable:!0,get:v}})},nt=(e,r={})=>{const[t,{addDroppable:a,removeDroppable:s}]=ge(),[l,o]=De(null);ue(()=>{const i=l();i&&a({id:e,node:i,layout:Y(i),data:r})}),J(()=>s(e));const d=()=>t.active.droppableId===e,c=()=>{var i;return((i=t.droppables[e])==null?void 0:i.transform)||W()};return Object.defineProperties((i,f)=>{const m=f?f():{};o(i),m.skipTransform||q(()=>{const y=c();if(ke(y,W()))i.style.removeProperty("transform");else{const p=Oe(c());i.style.setProperty("transform",p.transform??null)}})},{ref:{enumerable:!0,value:o},isActiveDroppable:{enumerable:!0,get:d},transform:{enumerable:!0,get:c}})},ot=N('<span class="skeleton block w-full h-full rounded-b-none">'),st=N('<li class="bg-background-base border-border border rounded-md"><div class=p-4><span class="skeleton block h-5 w-1/2 mb-2"></span><span class="skeleton block h-5 w-full">'),it=N('<div class="absolute top-3 left-3 z-10">'),lt=N('<li><div class="absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100"></div><div class="p-3 border-t border-border"><h3 class="mb-0.5 line-clamp-1 text-sm">');const qt=()=>(()=>{var e=st(),r=e.firstChild;return T(e,E(Me,{ratio:"16:9",get children(){return ot()}}),r),e})(),Nt=e=>{const r=$e(`media:${e.media.id}`),t=F(()=>B.get.hasPermission(["update_media"]).all),a=F(()=>ye.getTranslation(e.media.title,e.contentLocale)),s=F(()=>ye.getTranslation(e.media.alt,e.contentLocale)),l=F(()=>V.get.selectedMedia.includes(e.media.id));return(()=>{var o=lt(),d=o.firstChild,c=d.nextSibling,v=c.firstChild;return o.addEventListener("keypress",()=>{}),o.$$keydown=()=>{},o.$$keyup=()=>{},o.$$click=()=>{var i;e.isDragging()||(e.rowTarget.setTargetId(e.media.id),(i=e.showingDeleted)!=null&&i.call(e)?e.rowTarget.setTrigger("view",!0):t()&&e.rowTarget.setTrigger("update",!0))},oe(r,o,()=>!0),T(o,E(Ce,{get when(){var i;return F(()=>!!t())()&&!((i=e.showingDeleted)!=null&&i.call(e))},get children(){var i=it();return T(i,E(Ee,{get value(){return l()},onChange:()=>{l()?V.get.removeSelectedMedia(e.media.id):V.get.addSelectedMedia(e.media.id)},copy:{},theme:"fit",noMargin:!0})),i}}),d),T(d,E(Se,{get actions(){var i,f,m,y,p;return[{label:A()("preview"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("view",!0)},permission:!0,hide:!((i=e.showingDeleted)!=null&&i.call(e))},{label:A()("edit"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("update",!0)},permission:t(),hide:(f=e.showingDeleted)==null?void 0:f.call(e)},{label:A()("clear_processed"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("clear",!0)},hide:e.media.type!=="image",permission:t()},{label:A()("delete"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("delete",!0)},permission:B.get.hasPermission(["delete_media"]).all,hide:(m=e.showingDeleted)==null?void 0:m.call(e),theme:"error"},{label:A()("restore"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("restore",!0)},permission:B.get.hasPermission(["update_media"]).all,hide:((y=e.showingDeleted)==null?void 0:y.call(e))===!1,theme:"primary"},{label:A()("delete_permanently"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.media.id),e.rowTarget.setTrigger("deletePermanently",!0)},permission:B.get.hasPermission(["delete_media"]).all,hide:((p=e.showingDeleted)==null?void 0:p.call(e))===!1,theme:"error"}]},options:{border:!0}})),T(o,E(Me,{ratio:"16:9",innerClass:"overflow-hidden",get children(){return E(Ze,{get media(){return e.media},get alt(){return s()||a()||""}})}}),c),T(v,()=>a()||A()("no_translation")),T(c,E(Qe,{type:"simple",get text(){return e.media.key},get value(){return e.media.url},class:"text-xs"}),null),ie(()=>{var i;return le(o,de("bg-card-base border-border border rounded-md group overflow-hidden relative",{"cursor-pointer":t()||((i=e.showingDeleted)==null?void 0:i.call(e))}))}),o})()};ce(["click","keyup","keydown"]);/*! Fast Average Color | © 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function dt(e){var r=e.toString(16);return r.length===1?"0"+r:r}function pe(e){return"#"+e.map(dt).join("")}function ct(e){var r=(e[0]*299+e[1]*587+e[2]*114)/1e3;return r<128}function ut(e){return e?gt(e)?e:[e]:[]}function gt(e){return Array.isArray(e[0])}function ve(e,r,t){for(var a=0;a<t.length;a++)if(vt(e,r,t[a]))return!0;return!1}function vt(e,r,t){switch(t.length){case 3:if(ft(e,r,t))return!0;break;case 4:if(ht(e,r,t))return!0;break;case 5:if(bt(e,r,t))return!0;break;default:return!1}}function ft(e,r,t){return e[r+3]!==255||e[r]===t[0]&&e[r+1]===t[1]&&e[r+2]===t[2]}function ht(e,r,t){return e[r+3]&&t[3]?e[r]===t[0]&&e[r+1]===t[1]&&e[r+2]===t[2]&&e[r+3]===t[3]:e[r+3]===t[3]}function Q(e,r,t){return e>=r-t&&e<=r+t}function bt(e,r,t){var a=t[0],s=t[1],l=t[2],o=t[3],d=t[4],c=e[r+3],v=Q(c,o,d);return o?!!(!c&&v||Q(e[r],a,d)&&Q(e[r+1],s,d)&&Q(e[r+2],l,d)&&v):v}var mt=24;function yt(e,r,t){for(var a={},s=t.dominantDivider||mt,l=t.ignoredColor,o=t.step,d=[0,0,0,0,0],c=0;c<r;c+=o){var v=e[c],i=e[c+1],f=e[c+2],m=e[c+3];if(!(l&&ve(e,c,l))){var y=Math.round(v/s)+","+Math.round(i/s)+","+Math.round(f/s);a[y]?a[y]=[a[y][0]+v*m,a[y][1]+i*m,a[y][2]+f*m,a[y][3]+m,a[y][4]+1]:a[y]=[v*m,i*m,f*m,m,1],d[4]<a[y][4]&&(d=a[y])}}var p=d[0],D=d[1],C=d[2],S=d[3],L=d[4];return S?[Math.round(p/S),Math.round(D/S),Math.round(C/S),Math.round(S/L)]:t.defaultColor}function pt(e,r,t){for(var a=0,s=0,l=0,o=0,d=0,c=t.ignoredColor,v=t.step,i=0;i<r;i+=v){var f=e[i+3],m=e[i]*f,y=e[i+1]*f,p=e[i+2]*f;c&&ve(e,i,c)||(a+=m,s+=y,l+=p,o+=f,d++)}return o?[Math.round(a/o),Math.round(s/o),Math.round(l/o),Math.round(o/d)]:t.defaultColor}function xt(e,r,t){for(var a=0,s=0,l=0,o=0,d=0,c=t.ignoredColor,v=t.step,i=0;i<r;i+=v){var f=e[i],m=e[i+1],y=e[i+2],p=e[i+3];c&&ve(e,i,c)||(a+=f*f*p,s+=m*m*p,l+=y*y*p,o+=p,d++)}return o?[Math.round(Math.sqrt(a/o)),Math.round(Math.sqrt(s/o)),Math.round(Math.sqrt(l/o)),Math.round(o/d)]:t.defaultColor}function xe(e){return U(e,"defaultColor",[0,0,0,0])}function U(e,r,t){return e[r]===void 0?t:e[r]}var we=10,se=100;function wt(e){return e.search(/\.svg(\?|$)/i)!==-1}function It(e){if(Ae(e)){var r=e.naturalWidth,t=e.naturalHeight;return!e.naturalWidth&&wt(e.src)&&(r=t=se),{width:r,height:t}}return Dt(e)?{width:e.videoWidth,height:e.videoHeight}:Le(e)?{width:e.codedWidth,height:e.codedHeight}:{width:e.width,height:e.height}}function Ie(e){return Ct(e)?"canvas":Tt(e)?"offscreencanvas":Le(e)?"videoframe":Mt(e)?"imagebitmap":e.src}function Ae(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement}var Pe=typeof OffscreenCanvas<"u";function Tt(e){return Pe&&e instanceof OffscreenCanvas}function Dt(e){return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement}function Le(e){return typeof VideoFrame<"u"&&e instanceof VideoFrame}function Ct(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}function Mt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function Et(e,r){var t=U(r,"left",0),a=U(r,"top",0),s=U(r,"width",e.width),l=U(r,"height",e.height),o=s,d=l;if(r.mode==="precision")return{srcLeft:t,srcTop:a,srcWidth:s,srcHeight:l,destWidth:o,destHeight:d};var c;return s>l?(c=s/l,o=se,d=Math.round(o/c)):(c=l/s,d=se,o=Math.round(d/c)),(o>s||d>l||o<we||d<we)&&(o=s,d=l),{srcLeft:t,srcTop:a,srcWidth:s,srcHeight:l,destWidth:o,destHeight:d}}var St=typeof window>"u";function kt(){return St?Pe?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var _t="FastAverageColor: ";function P(e){return Error(_t+e)}function G(e,r){r||console.error(e)}var zt=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(r,t){if(!r)return Promise.reject(P("call .getColorAsync() without resource"));if(typeof r=="string"){if(typeof Image>"u")return Promise.reject(P("resource as string is not supported in this environment"));var a=new Image;return a.crossOrigin=t&&t.crossOrigin||"",a.src=r,this.bindImageEvents(a,t)}else{if(Ae(r)&&!r.complete)return this.bindImageEvents(r,t);var s=this.getColor(r,t);return s.error?Promise.reject(s.error):Promise.resolve(s)}},e.prototype.getColor=function(r,t){t=t||{};var a=xe(t);if(!r){var s=P("call .getColor() without resource");return G(s,t.silent),this.prepareResult(a,s)}var l=It(r),o=Et(l,t);if(!o.srcWidth||!o.srcHeight||!o.destWidth||!o.destHeight){var s=P('incorrect sizes for resource "'.concat(Ie(r),'"'));return G(s,t.silent),this.prepareResult(a,s)}if(!this.canvas&&(this.canvas=kt(),!this.canvas)){var s=P("OffscreenCanvas is not supported in this browser");return G(s,t.silent),this.prepareResult(a,s)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var s=P("Canvas Context 2D is not supported in this browser");return G(s,t.silent),this.prepareResult(a)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(r,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var d=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(d,t))}catch(c){var s=P("security error (CORS) for resource ".concat(Ie(r),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return G(s,t.silent),t.silent||console.error(c),this.prepareResult(a,s)}},e.prototype.getColorFromArray4=function(r,t){t=t||{};var a=4,s=r.length,l=xe(t);if(s<a)return l;var o=s-s%a,d=(t.step||1)*a,c;switch(t.algorithm||"sqrt"){case"simple":c=pt;break;case"sqrt":c=xt;break;case"dominant":c=yt;break;default:throw P("".concat(t.algorithm," is unknown algorithm"))}return c(r,o,{defaultColor:l,ignoredColor:ut(t.ignoredColor),step:d,dominantDivider:t.dominantDivider})},e.prototype.prepareResult=function(r,t){var a=r.slice(0,3),s=[r[0],r[1],r[2],r[3]/255],l=ct(r);return{value:[r[0],r[1],r[2],r[3]],rgb:"rgb("+a.join(",")+")",rgba:"rgba("+s.join(",")+")",hex:pe(a),hexa:pe(r),isDark:l,isLight:!l,error:t}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(r,t){var a=this;return new Promise(function(s,l){var o=function(){v();var i=a.getColor(r,t);i.error?l(i.error):s(i)},d=function(){v(),l(P('Error loading image "'.concat(r.src,'"')))},c=function(){v(),l(P('Image "'.concat(r.src,'" loading aborted')))},v=function(){r.removeEventListener("load",o),r.removeEventListener("error",d),r.removeEventListener("abort",c)};r.addEventListener("load",o),r.addEventListener("error",d),r.addEventListener("abort",c)})},e}(),Ot=N('<li class="bg-background-base border-border border rounded-md"><div class=p-4><span class="skeleton block h-5 w-1/2 mb-2"></span><span class="skeleton block h-5 w-full">'),$t=N('<li><div class="absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100"></div><div class="w-full flex flex-col -mt-px"><div class="flex items-center gap-2 mb-1"><p class="text-sm font-medium text-title line-clamp-1"></p></div><p class="text-sm text-body"> <!>, <!> ');const Bt=()=>Ot(),Vt=e=>{const r=$e(`folder:${e.folder.id}`),t=nt(`folder:${e.folder.id}`),a=Xe(),s=Ge(),l=F(()=>B.get.hasPermission(["update_media"]).all),o=F(()=>V.get.selectedFolders.includes(e.folder.id)),d=F(()=>`/admin/media/${e.folder.id}?${a.search}`),c=()=>{e.isDragging()||s(d(),{scroll:!1})};return(()=>{var v=$t(),i=v.firstChild,f=i.nextSibling,m=f.firstChild,y=m.firstChild,p=m.nextSibling,D=p.firstChild,C=D.nextSibling,S=C.nextSibling,L=S.nextSibling;return L.nextSibling,v.addEventListener("keypress",k=>{k.key==="Enter"&&c()}),v.$$click=c,oe(r,v,()=>!0),oe(t,v,()=>!0),T(i,E(Se,{get actions(){return[{label:A()("edit"),type:"button",onClick:()=>{e.rowTarget.setTargetId(e.folder.id),e.rowTarget.setTrigger("updateFolder",!0)},permission:B.get.hasPermission(["update_media"]).all}]},options:{border:!0}})),T(v,E(Ce,{get when(){return l()},get children(){return E(Ee,{get value(){return o()},onChange:()=>{o()?V.get.removeSelectedFolder(e.folder.id):V.get.addSelectedFolder(e.folder.id)},copy:{},theme:"fit",noMargin:!0})}}),f),T(m,E(Ue,{size:18}),y),T(y,()=>e.folder.title),T(p,()=>e.folder.folderCount,D),T(p,()=>A()("folders"),C),T(p,()=>e.folder.mediaCount,L),T(p,()=>A()("media"),null),ie(k=>{var _=de("group flex items-start gap-3 rounded-md cursor-pointer border border-border p-3 bg-card-base hover:bg-card-hover relative",{"bg-card-hover":t.isActiveDroppable}),w=e.folder.title;return _!==k.e&&le(v,k.e=_),w!==k.t&&Ye(y,"title",k.t=w),k},{e:void 0,t:void 0}),v})()};ce(["click"]);export{Wt as D,zt as F,Vt as M,jt as a,Bt as b,Nt as c,qt as d,V as m};
