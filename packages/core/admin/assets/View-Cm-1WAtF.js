import{b as P,Q as $,a as s,t as x,w as D,k as I,s as h,P as L,i as w,d as R,e as O,T as t,y as C,z as A,B as u,x as k,W as z}from"./index-CQ3-BSEL.js";import{I as c}from"./InfoRow-j4GZ1DzO.js";import{B as E}from"./Tooltip-C4WAYcWb.js";import{C as B}from"./Confirmation-BG2UDkdk.js";import{D as S}from"./DetailsList-BHEhgC4b.js";import{D as T}from"./ContentLocaleSelect-Cb-MBOKh.js";import{S as M}from"./Standard-DQ0Jv3GR.js";import"./ISASYZ5H-BKhR2em3.js";import"./ErrorMessage-BUQl5hDc.js";import"./Pill-BBVDx-5p.js";var j=x('<div class="w-full bg-input-base h-3 rounded-md overflow-hidden"role=progressbar aria-valuemin=0 aria-valuemax=100 tabindex=-1><div>'),N=x('<div class="flex justify-between gap-4 mt-2.5"><span class=text-sm></span><span class=text-sm>');const W=i=>{const[n,m]=P(0);return $(()=>{m(i.progress)}),[(()=>{var r=j(),g=r.firstChild;return D(o=>{var e=n(),a=`${n()}% progress`,d=I("h-full rounded-md duration-200 transition-all",{"bg-error-base":i.type==="usage"&&n()>90,"bg-white":i.type==="usage"&&n()<=90,"bg-primary-base":i.type==="target"&&n()>90,"bg-primary-base ":i.type==="target"&&n()<=90}),l=`${n()}%`;return e!==o.e&&h(r,"aria-valuenow",o.e=e),a!==o.t&&h(r,"aria-valuetext",o.t=a),d!==o.a&&L(g,o.a=d),l!==o.o&&((o.o=l)!=null?g.style.setProperty("width",l):g.style.removeProperty("width")),o},{e:void 0,t:void 0,a:void 0,o:void 0}),r})(),s(R,{get when(){return i.labels},get children(){var r=N(),g=r.firstChild,o=g.nextSibling;return w(g,()=>{var e;return(e=i.labels)==null?void 0:e.start}),w(o,()=>{var e;return(e=i.labels)==null?void 0:e.end}),r}})]},q=i=>{const n=O.media.useDeleteAllProcessedImages({onSuccess:()=>{i.state.setOpen(!1)}});return s(B,{get state(){return{open:i.state.open,setOpen:i.state.setOpen,isLoading:n.action.isPending,isError:n.action.isError}},get copy(){var m;return{title:t()("clear_all_processed_images_modal_title"),description:t()("clear_all_processed_images_modal_description"),error:(m=n.errors())==null?void 0:m.message}},callbacks:{onConfirm:()=>{n.action.mutate({})},onCancel:()=>{i.state.setOpen(!1),n.reset()}}})},Z=i=>{const[n,m]=P(!1),r=O.settings.useGetSettings({queryParams:{}}),g=C(()=>{var d,l,p,_,b,f,v,y;if(((l=(d=r.data)==null?void 0:d.data)==null?void 0:l.media.storage.remaining)===null||((_=(p=r.data)==null?void 0:p.data)==null?void 0:_.media.storage.used)===0)return 0;const e=((f=(b=r.data)==null?void 0:b.data)==null?void 0:f.media.storage.total)||0,a=((y=(v=r.data)==null?void 0:v.data)==null?void 0:y.media.storage.remaining)||0;return Math.floor((e-a)/e*100)}),o=C(()=>A.get.locales);return s(z,{get slots(){return{header:s(M,{get copy(){return{title:t()("system_overview_route_title"),description:t()("system_overview_route_description")}}})}},get children(){return[s(T,{get state(){return{isError:r.isError,isSuccess:r.isSuccess,isLoading:r.isLoading}},options:{padding:"24"},get children(){return[s(c.Root,{get title(){return t()("storage_breakdown")},get description(){return t()("storage_breakdown_setting_message")},get children(){return s(c.Content,{get title(){var e,a;return t()("storage_remaining_title",{storage:u.bytesToSize((a=(e=r.data)==null?void 0:e.data)==null?void 0:a.media.storage.remaining)})},get children(){return s(W,{get progress(){return g()},type:"usage",get labels(){var e,a,d,l;return{start:u.bytesToSize((a=(e=r.data)==null?void 0:e.data)==null?void 0:a.media.storage.used),end:u.bytesToSize((l=(d=r.data)==null?void 0:d.data)==null?void 0:l.media.storage.total)}}})}})}}),s(c.Root,{get title(){return t()("processed_images")},get description(){var e,a;return t()("processed_images_setting_message",{limit:((a=(e=r.data)==null?void 0:e.data)==null?void 0:a.media.processed.imageLimit)||0})},get children(){return s(c.Content,{get title(){return t()("clear_all")},get description(){return t()("clear_all_processed_images_setting_message")},get children(){return s(E,{size:"medium",type:"button",theme:"danger",onClick:()=>{m(!0)},get permission(){return k.get.hasPermission(["update_media"]).all},get children(){var e,a;return t()("clear_all_processed_images_button",{count:((a=(e=r.data)==null?void 0:e.data)==null?void 0:a.media.processed.total)||0})}})}})}}),s(c.Root,{get title(){return t()("locales")},get description(){return t()("locales_setting_message")},get children(){return s(c.Content,{get title(){return t()("content_locales")},get description(){return t()("content_locales_description")},get children(){return s(S,{type:"text",get items(){return o().map(e=>({label:e.name||e.code,value:`${e.code} ${e.isDefault?`(${t()("default")})`:""} `}))||[]}})}})}}),s(c.Root,{get title(){return t()("supported_features")},get description(){return t()("supported_features_setting_message")},get children(){return s(c.Content,{get children(){return s(S,{type:"pill",get items(){var e,a,d,l;return[{label:t()("media_enabled"),value:(a=(e=r.data)==null?void 0:e.data)!=null&&a.media.enabled?t()("yes"):t()("no")},{label:t()("email_enabled"),value:(l=(d=r.data)==null?void 0:d.data)!=null&&l.email.enabled?t()("yes"):t()("no")}]}})}})}})]}}),s(q,{get state(){return{open:n(),setOpen:m}}})]}})};export{Z as default};
