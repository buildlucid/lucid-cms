import{a as r,h as m,M as d,aj as y,y as l,r as b,T as c,z as k,B as o,e as x,K as C,ak as D}from"./index-CQ3-BSEL.js";import{x as g}from"./Tooltip-C4WAYcWb.js";import{a as T,T as L}from"./Tr-Dh-rHsqH.js";import{D as w,T as s}from"./DateCol-D5X8S346.js";import{P as f}from"./PillCol-CVehCi4c.js";import{C as F}from"./Confirmation-BG2UDkdk.js";const S=e=>r(T,{get options(){var n,t;return{include:(n=e==null?void 0:e.options)==null?void 0:n.include,padding:(t=e==null?void 0:e.options)==null?void 0:t.padding}},get children(){return r(m,{get children(){return[r(d,{get when(){return!e.user||!e.user.username},children:"-"}),r(d,{get when(){return e.user},get children(){return r(y,{get user(){var n,t,i;return{username:((n=e.user)==null?void 0:n.username)||"",firstName:(t=e.user)==null?void 0:t.firstName,lastName:(i=e.user)==null?void 0:i.lastName,thumbnail:void 0}},mode:"short"})}})]}})}}),P=e=>{const n=l(()=>{var t,i;return e.document.status==="published"?!0:e.collection.config.useDrafts?typeof((i=(t=e.document.version)==null?void 0:t.published)==null?void 0:i.id)=="number":!0});return r(L,{get index(){return e.index},get selected(){return e.selected},get options(){return e.options},get callbacks(){return e.callbacks},get actions(){return e.actions},get onClick(){var t;return(t=e.callbacks)==null?void 0:t.onClick},get current(){return e.current},get children(){return[r(b,{get each(){return e.fieldInclude},children:(t,i)=>t.type==="tab"||t.type==="repeater"?null:r(N,{field:t,get document(){return e.document},get include(){return e.include},get index(){return i()},get collectionTranslations(){return e.collection.config.useTranslations}})}),r(f,{get text(){return l(()=>!!n())()?c()("published"):c()("draft")},get theme(){return n()?"primary":"grey"},get options(){return{include:e==null?void 0:e.include[e.fieldInclude.length]}}}),r(w,{get date(){return e.document.updatedAt},get options(){return{include:e==null?void 0:e.include[e.fieldInclude.length]}}})]}})},N=e=>{const n=l(()=>k.get.contentLocale??""),t=l(()=>{var a;return(a=e.document.fields)==null?void 0:a.find(h=>h.key===e.field.key)}),i=l(()=>g.getFieldValue({fieldData:t(),fieldConfig:e.field,contentLocale:n(),collectionTranslations:e.collectionTranslations})),u=l(()=>g.getFieldMeta({fieldData:t(),fieldConfig:e.field,contentLocale:n(),collectionTranslations:e.collectionTranslations}));return r(m,{get fallback(){return r(s,{text:"~",get options(){return{include:e==null?void 0:e.include[e.index]}}})},get children(){return[r(d,{get when(){var a;return((a=t())==null?void 0:a.type)==="text"},get children(){return r(s,{get text(){return i()},get options(){return{include:e==null?void 0:e.include[e.index]}}})}}),r(d,{get when(){var a;return((a=t())==null?void 0:a.type)==="textarea"},get children(){return r(s,{get text(){return i()},get options(){return{include:e==null?void 0:e.include[e.index],maxLines:2}}})}}),r(d,{get when(){var a;return((a=t())==null?void 0:a.type)==="checkbox"},get children(){return r(f,{get text(){return l(()=>!!i())()?c()("yes"):c()("no")},theme:"primary",get options(){return{include:e==null?void 0:e.include[e.index]}}})}}),r(d,{get when(){var a;return((a=t())==null?void 0:a.type)==="user"},get children(){return r(S,{get user(){return u()},get options(){return{include:e==null?void 0:e.include[e.index]}}})}})]}})},K=e=>{const n=l(()=>{var i;return o.getLocaleValue({value:(i=e.collection)==null?void 0:i.details.singularName})||c()("collection")}),t=x.documents.useDeleteSingle({onSuccess:()=>{var i;e.state.setOpen(!1),(i=e.callbacks)!=null&&i.onSuccess&&e.callbacks.onSuccess()},getCollectionName:n});return r(F,{get state(){return{open:e.state.open,setOpen:e.state.setOpen,isLoading:t.action.isPending,isError:t.action.isError}},get copy(){var i;return{title:c()("delete_document_modal_title",{name:n()}),description:c()("delete_document_modal_description",{name:n().toLowerCase()}),error:(i=t.errors())==null?void 0:i.message}},callbacks:{onConfirm:()=>{const i=typeof e.id=="function"?e.id():e.id;if(!i)return console.error("No id provided");t.action.mutate({id:i,collectionKey:e.collection.key})},onCancel:()=>{e.state.setOpen(!1),t.reset()}}})},R=e=>e.map(n=>{switch(n.type){case"user":return{label:o.getLocaleValue({value:n.details.label,fallback:n.key}),key:n.key,icon:r(D,{})};default:return{label:o.getLocaleValue({value:n.details.label,fallback:n.key}),key:n.key,icon:r(C,{})}}}),j=e=>(e==null?void 0:e.fields.filter(n=>n.type!=="repeater"))||[],A=e=>`_${e.fieldKey}`,E=e=>{const n=[],t=i=>{if(i)for(const u of i){if(u.type==="repeater"&&u.fields){t(u.fields);return}e!=null&&e.config.displayInListing.includes(u.key)&&n.push(u)}};return t(e==null?void 0:e.fields),n};export{P as D,K as a,j as b,E as c,A as f,R as t};
